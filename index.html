<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Map with Leaflet</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        html, body { height: 100%; margin: 0; }
        #map { width: 100%; height: 100%; }
    </style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    // 0. Initialize map
    var map = L.map('map').setView([18.6, 73], 7); // Maharashtra centered

    // 1. Add OpenStreetMap base layer
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    var maharashtraLayer;
    var raigadBlocksLayer;

    // 2. Load Maharashtra districts GeoJSON
    fetch('district.geojson') // <-- Put correct file name
        .then(response => response.json())
        .then(district => {
            maharashtraLayer = L.geoJSON(district, {
                onEachFeature: function(feature, layer) {
                    layer.bindPopup(feature.properties.DISTRICT);
                    layer.on('click', function() {
                        if (feature.properties.DISTRICT === 'Raigarh') { // Be careful with spelling!
                            loadRaigadBlocks();
                        }
                    });
                },
                style: {
                    color: "blue",
                    weight: 2,
                    fillOpacity: 0.1
                }
            }).addTo(map);
        });

    // 3. Function to load Raigad Blocks
    function loadRaigadBlocks() {
        if (maharashtraLayer) {
            map.removeLayer(maharashtraLayer);
        }

        fetch('raigarh_subdistrict.geojson') // <-- Put correct file name
            .then(response => response.json())
            .then(raigah_subdistrict => {
                raigadBlocksLayer = L.geoJSON(raigah_subdistrict, {
                    onEachFeature: function(feature, layer) {
                        layer.bindPopup(feature.properties.Sub_dist);
                        layer.on('click', function() {
                            if (feature.properties.Sub_dist === 'MURUD') {
                                showMurudMap();
                            }
                        });
                    },
                    style: {
                        color: "green",
                        weight: 1,
                        fillOpacity: 0.2
                    }
                }).addTo(map);
            });
    }

    // 4. Function to show Murud image map
    function showMurudMap() {
        if (raigah_subdistrict) {
            map.removeLayer(raigadBlocksLayer);
        }

        var murudImageBounds = [
            [18.327, 72.927],
            [18.317, 72.937]
        ];
        L.imageOverlay('padmadurga.jpeg', murudImageBounds).addTo(map);
        map.fitBounds(murudImageBounds);
    }

</script>

</body>
</html>
